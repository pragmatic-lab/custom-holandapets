<?xml version="1.0" encoding="utf-8"?>
<odoo>


	<template id="report_invoice_summary">
		<t t-call="web.html_container">
			<t t-call="web.external_layout">

				<div class="page">
					<t t-set="print_copy" t-value="form['used_context']['print_copy']"/>
					<t t-set="date_from" t-value="form['used_context']['date_from']"/>
					<t t-set="date_to" t-value="form['used_context']['date_to']"/>
					<t t-set="user_ids" t-value="form['used_context']['user_ids']"/>
					<t t-set="data_user" t-value="request.env['account.invoice_summary_report'].return_id_name_user(user_ids)"/>
					
					<t t-if="data_user">
						<t t-foreach="data_user" t-as="item_user">

							<t t-set="user" t-value="item_user['user_id']"/>
							<t t-set="info_user" t-value="request.env['res.users'].search([('id', '=', user)])"/>
							<t t-set="box" t-value="info_user.box_id"/>
							<t t-set="sequence_invoice" t-value="request.env['account.invoice_summary_report'].search_sequence_invoice_initial_final(user)"/>

							<t t-set="data_profit_and_lost" t-value="request.env['account.invoice_summary_report'].return_total_profit_and_lost(user, date_from, date_to)"/>

							<t t-set="data_detail_total" t-value="request.env['account.invoice_summary_report'].return_data_detail_total(request.env['summary.payment_account_invoice'], user)"/>

							
							<t t-set="data_detail_total_type_journal" t-value="request.env['account.invoice_summary_report'].return_data_detail_total_type_journal(request.env['summary.payment_account_invoice'], user)"/>

							<t t-set="data_detail_total_type_journal_name" t-value="request.env['account.invoice_summary_report'].return_data_detail_total_type_journal_name(request.env['summary.payment_account_invoice'], user)"/>



							<!-- data para armar la tabla de doble entrada de impuestos por categoria -->
							<t t-set="data_taxes_out_invoice" t-value="request.env['account.invoice_summary_report'].return_taxes(request.env.user.company_id.id, date_from, date_to, 'out_invoice', user)"/>
							<t t-set="columns_taxes_out_invoice" t-value="request.env['account.invoice_summary_report'].return_columns_taxes(data_taxes_out_invoice)"/>
							<t t-set="columns_categories_out_invoice" t-value="request.env['account.invoice_summary_report'].return_columns_category(data_taxes_out_invoice)"/>


							<!-- data para armar la tabla de doble entrada de impuestos por categoria devoluciones -->
							<t t-set="data_taxes_out_refund" t-value="request.env['account.invoice_summary_report'].return_taxes(request.env.user.company_id.id, date_from, date_to, 'out_refund', user)"/>
							<t t-set="columns_taxes_out_refund" t-value="request.env['account.invoice_summary_report'].return_columns_taxes(data_taxes_out_refund)"/>
							<t t-set="columns_categories_out_refund" t-value="request.env['account.invoice_summary_report'].return_columns_category(data_taxes_out_refund)"/>




							<h3>Comprobante de Informe Diario</h3>

							<!-- Informacion basica -->
							<div id="informations" class="row mt32 mb32">
								<div class="col-auto mw-100 mb-2">
									<strong>Cajero:</strong>
									<p class="m-0" t-esc="info_user.partner_id.name"/>
								</div>
								<div class="col-auto mw-100 mb-2" t-if="date_from">
									<strong>Fecha Inicial:</strong>
									<p class="m-0" t-esc="date_from" t-options="{'widget': 'datetime'}"/>
								</div>
								<div class="col-auto mw-100 mb-2" t-if="date_to">
									<strong>Fecha Final:</strong>
									<p class="m-0" t-esc="date_to" t-options="{'widget': 'datetime'}"/>
								</div>
								<t t-if="sequence_invoice">
									<div class="col-auto mw-100 mb-2" >
										<strong>Consecutivo Inicial:</strong>

										<p class="m-0" t-esc="sequence_invoice['initial']"/>
									</div>
									<div class="col-auto mw-100 mb-2" >
										<strong>Consecutivo Final:</strong>
										<p class="m-0" t-esc="sequence_invoice['final']"/>
									</div>
								</t>
								<div class="col-auto mw-100 mb-2" t-if="box">
									<strong>Caja:</strong>
									<p class="m-0"> [<span t-esc="box.serial"/>] <span t-esc="box.name"/></p>
									<p class="m-0" t-esc="box.description"/>
								</div>
							</div>
							<!-- Informacion basica -->


							<!-- Pagos realizados -->
							<t t-set="total_balance" t-value="0"/>
							<t t-set="data_refund" t-value="[]"/>
							<table class='receipt-orderlines' style="width: 80%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
								<colgroup>
									<col width='13%' />
									<col width='10%' />
									<col width='15%' />
									<col width='12%' />
									<col width='20%' />
									<col width='10%' />
									<col width='15%' />
								</colgroup>

								<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
									<tr>
										<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FECHA</span></th>
										<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FACTURA</span></th>
										<th class="text-left"><span style="margin-left:5px; margin-right:5px;">REF. PAGO</span></th>
										<th class="text-left"><span style="margin-left:5px; margin-right:5px;">NÚM AUTORIZACIÓN</span></th>
										<th class="text-left"><span style="margin-left:5px; margin-right:5px;">CLIENTE</span></th>
										<th class="text-right"><span style="margin-left:5px; margin-right:5px;">VALOR</span></th>
										<th class="text-right"><span style="margin-left:5px; margin-right:5px;">FORMA DE PAGO</span></th>
									</tr>
								</thead>
								<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
									<tr t-foreach="request.env['summary.payment_account_invoice'].search([('user_id', '=', user)], order='invoice_number asc')" t-as="payment">
										<t t-if="payment.type_payment != 'outbound'">

										<td class="text-left">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.date_move" t-options="{'widget': 'datetime'}"/>
										</td>
										<td class="text-left">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.invoice_number"/>
										</td>
										
										<td class="text-left">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.payment_ref"/>
										</td>
										<td class="text-left">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.number_authorization"/>
										</td>

										<td class="text-left">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.partner_name"/>
										</td>

										<td class="text-right">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.balance" t-options="{'widget': 'float', 'precision': 0}"/>
										</td>
						
										<td class="text-left">
											<span style="margin-left:5px; margin-right:5px;" t-esc="payment.journal_name"/>
										</td>
										
										<t t-set="data_refund" t-value="request.env['account.invoice_summary_report'].return_data_outbound(payment, user, data_refund)"/>
										<t t-set="total_balance" t-value="total_balance + payment.balance"/>

										</t>


									</tr>
									<tr>
										<td class="text-left">
											
										</td>
										<td class="text-left">
											
										</td>
										
										<td class="text-left">
											
										</td>
										<td class="text-left">
											
										</td>

										<td class="text-right">
											<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
										</td>

										<td class="text-right">
											<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="total_balance" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											
										</td>
						
										<td class="text-left">
											
										</td>
									</tr>
								</tbody>
							</table>

							
							<t t-set="data_cartera" t-value="request.env['account.invoice_summary_report'].return_cartera(date_from, date_to, user)"/>


							<!-- cartera -->
							<t t-if="data_cartera">
								<br/>
								<h4>Detalle de CxC</h4>
								
								<t t-set="amount_total" t-value="0"/>
								<t t-set="amount_residual" t-value="0"/>
								<table class='receipt-orderlines' style="width: 80%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<colgroup>
										<col width='15%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='20%' />
										<col width='10%' />
										<col width='10%' />
									</colgroup>

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FECHA</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FACTURA</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">ASIENTO CONTABLE</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">AUTORIZACIÓN</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">CLIENTE</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">TOTAL</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">TOTAL ADEUDADO</span></th>
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="data_cartera" t-as="payment">
											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="payment['date_move']" t-options="{'widget': 'datetime'}"/>
											</td>
											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="payment['invoice_number']"/>
											</td>
											
											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="payment['account_move']"/>
											</td>
											<td class="text-left">
												
											</td>

											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="payment['partner_name']"/>
											</td>

											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="payment['amount_total']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>
							
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="payment['amount_residual']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>
											<t t-set="amount_total" t-value="amount_total + payment['amount_total']"/>
											<t t-set="amount_residual" t-value="amount_residual + payment['amount_residual']"/>
										</tr>
										<tr>
											<td class="text-left">
												
											</td>
											<td class="text-left">
												
											</td>
											
											<td class="text-left">
												
											</td>
											<td class="text-left">
												
											</td>

											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>

											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="amount_total" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
							
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="amount_residual" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
										</tr>
									</tbody>
								</table>
							</t>

							<!-- devoluciones -->
							<t t-if="request.env['summary.payment_account_invoice'].search([('user_id', '=', user)])">
								<br/>
								<h4>Devoluciones</h4>
								
								<t t-set="amount_balance" t-value="0"/>
								<table class='receipt-orderlines' style="width: 80%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<colgroup>
										<col width='15%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='20%' />
										<col width='10%' />
									</colgroup>

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FECHA</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">DEVOLUCIÓN</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">REF. PAGO</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">MEDIO DE PAGO</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">DOC. INICIAL</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">TERCERO</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">VALOR</span></th>
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="request.env['summary.payment_account_invoice'].search([('user_id', '=', user)], order='invoice_number asc')" t-as="refund">
											<t t-if="refund.type_payment == 'outbound'">
												<t t-if="refund.invoice_id.origin">
													<td class="text-left">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.date_move" t-options="{'widget': 'datetime'}"/>
													</td>
													<td class="text-left">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.invoice_id.number"/>
													</td>
													
													<td class="text-left">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.payment_name"/>
													</td>
													<td class="text-left">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.journal_id.name"/>
													</td>

													<td class="text-left">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.invoice_id.origin"/>
													</td>

													<td class="text-left">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.partner_id.name"/>
													</td>
									
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-esc="refund.balance" t-options="{'widget': 'float', 'precision': 0}"/>
													</td>

													<t t-if="int(refund.balance)">
														<t t-set="amount_balance" t-value="amount_balance + refund.balance"/>
													</t>
												</t>
											</t>

										</tr>
										<tr>
											<td class="text-left">
												
											</td>
											<td class="text-left">
												
											</td>
											
											<td class="text-left">
												
											</td>
											<td class="text-left">
												
											</td>

											<td class="text-right">
												
											</td>

											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>
							
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="amount_balance" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
										</tr>
									</tbody>
								</table>
							</t>


							<!-- gastos -->
							<t t-if="request.env['summary.payment_account_invoice'].search([('user_id', '=', user)])">
								<br/>
								<h4>Gastos</h4>
								
								<t t-set="sum_total_profit_and_lost" t-value="0"/>
								<table class='receipt-orderlines' style="width: 80%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<colgroup>
										<col width='12%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='13%' />
										<col width='20%' />
										<col width='10%' />
									</colgroup>

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FECHA</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">FACTURA</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">DESCRIPCIÓN</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">MEDIO DE PAGO</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">CUENTA</span></th>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">TERCERO</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">VALOR</span></th>
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="request.env['summary.payment_account_invoice'].search([('user_id', '=', user)], order='invoice_number asc')" t-as="payment">
											<t t-if="payment.invoice_id.type == 'in_invoice'">

												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.date_move" t-options="{'widget': 'datetime'}"/>
												</td>
												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.invoice_id.number"/>
												</td>
												
												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.payment_name"/>
												</td>
												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.journal_id.name"/>
												</td>

												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.account_name"/>
												</td>

												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.partner_id.name"/>
												</td>
								
												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.balance" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>

												<t t-if="int(payment.balance)">
													<t t-set="sum_total_profit_and_lost" t-value="sum_total_profit_and_lost + payment.balance"/>
												</t>

											</t>

											<t t-if="not payment.invoice_id and payment.type_payment == 'outbound'">

												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.date_move" t-options="{'widget': 'datetime'}"/>
												</td>
												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.invoice_id.number"/>
												</td>
												
												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.payment_name"/>
												</td>
												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.journal_id.name"/>
												</td>

												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.account_name"/>
												</td>

												<td class="text-left">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.partner_id.name"/>
												</td>
								
												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="payment.balance" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>

												<t t-if="int(payment.balance)">
													<t t-set="sum_total_profit_and_lost" t-value="sum_total_profit_and_lost + payment.balance"/>
												</t>

											</t>


										</tr>



										<tr>
											<td class="text-left">
												
											</td>
											<td class="text-left">
												
											</td>
											
											<td class="text-left">
												
											</td>
											<td class="text-left">
												
											</td>

											<td class="text-right">
												
											</td>

											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>
							
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_total_profit_and_lost" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
										</tr>
									</tbody>
								</table>
							</t>


							<!-- detalles de medios de pago -->
							<t t-if="data_detail_total">
								<br/>
								<h4>Detalles de Medios de Pago</h4>
								
								<t t-set="sum_debit" t-value="0"/>
								<t t-set="sum_credit" t-value="0"/>
								<t t-set="sum_balance" t-value="0"/>
								<table class='receipt-orderlines' style="width: 70%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<colgroup>
										<col width='20%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
									</colgroup>

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">MEDIO DE PAGO</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">CTIDAD PAGOS</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">DÉBITO</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">CRÉDITO</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">TOTAL DINERO</span></th>
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="data_detail_total" t-as="item">
											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['journal_name']"/>
											</td>
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['qty']"/>
											</td>
											
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['debit']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['credit']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>

											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['balance']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>

											<t t-if="int(item['debit'])">
												<t t-set="sum_debit" t-value="sum_debit + (item['debit'])"/>
											</t>
											<t t-if="int(item['credit'])">
												<t t-set="sum_credit" t-value="sum_credit + (item['credit'])"/>
											</t>
											<t t-if="int(item['balance'])">
												<t t-set="sum_balance" t-value="sum_balance + (item['balance'])"/>
											</t>

										</tr>
										<tr>
											<td class="text-left">
												
											</td>
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>
											
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_debit" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_credit" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>

											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_balance" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
										</tr>
									</tbody>
								</table>
							</t>

							<!-- total de medios de pago -->
							<t t-if="data_detail_total_type_journal_name">
								<br/>
								<h4>Total Medios de Pago</h4>
								
								<t t-set="sum_debit" t-value="0"/>
								<t t-set="sum_credit" t-value="0"/>
								<t t-set="sum_balance" t-value="0"/>
								<table class='receipt-orderlines' style="width: 70%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<colgroup>
										<col width='20%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
									</colgroup>

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-left"><span style="margin-left:5px; margin-right:5px;">TIPO DINERO INGRESADO</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">CTIDAD PAGOS</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">INGRESOS</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">EGRESOS</span></th>
											<th class="text-right"><span style="margin-left:5px; margin-right:5px;">DISPONIBLE</span></th>
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="data_detail_total_type_journal_name" t-as="item">
											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['journal_type']"/>
											</td>
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['qty']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>
											
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['debit']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>
											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['credit']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>

											<td class="text-right">
												<span style="margin-left:5px; margin-right:5px;" t-esc="item['balance']" t-options="{'widget': 'float', 'precision': 0}"/>
											</td>

											<t t-if="int(item['debit'])">
												<t t-set="sum_debit" t-value="sum_debit + (item['debit'])"/>
											</t>
											<t t-if="int(item['credit'])">
												<t t-set="sum_credit" t-value="sum_credit + (item['credit'])"/>
											</t>
											<t t-if="int(item['balance'])">
												<t t-set="sum_balance" t-value="sum_balance + (item['balance'])"/>
											</t>

										</tr>
										<tr>
											<td class="text-left">
												
											</td>
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>
											
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_debit" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_credit" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>

											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;" t-esc="sum_balance" t-options="{'widget': 'float', 'precision': 0}"/></strong></h6>
											</td>
										</tr>
									</tbody>
								</table>
							</t>


							<!-- total impuestos -->
							<t t-if="columns_taxes_out_invoice and columns_categories_out_invoice">

								<t t-set="size_column_taxes" t-value="len(columns_taxes_out_invoice)"/>

								<br/>
								<h4>Resumen de Ventas</h4>



								<table class='receipt-orderlines' style="width: 75%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<!-- <colgroup>
										<col width='20%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
									</colgroup> -->

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-left" width='20%'>
												<span style="margin-left:5px; margin-right:5px;">OPERACIONES</span>
											</th>
											<t t-foreach="columns_taxes_out_invoice" t-as="x">
												<th class="text-center" colspan="3">
													<span style="margin-left:5px; margin-right:5px;" t-esc="x['tax_name']"/>
												</th>
											</t>
											
										</tr>
										<tr>
											<th class="text-right" width='20%'>
												<span style="margin-left:5px; margin-right:5px;">CATEGORÍA</span>
											</th>
											<t t-foreach="columns_taxes_out_invoice" t-as="x">
												<th class="text-center" colspan="1">
													<span style="margin-left:5px; margin-right:5px;">VALOR FACTURADO</span>
												</th>
												<th class="text-center" colspan="1">
													<span style="margin-left:5px; margin-right:5px;">IMPUESTO</span>
												</th>
												<th class="text-center" colspan="1">
													<span style="margin-left:5px; margin-right:5px;">BASE</span>
												</th>
											</t>
											
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="columns_categories_out_invoice" t-as="x">
											<td class="text-left" width='20%'>
												<span style="margin-left:5px; margin-right:5px;" t-esc="x['category']"/>
											</td>

											<t t-foreach="range(size_column_taxes)" t-as="index">

												<t t-set="data_new" t-value="request.env['account.invoice_summary_report'].return_items_columns(data_taxes_out_invoice, columns_taxes_out_invoice[index]['tax_id'], x['category_id'])"/>

												<t t-if="data_new">
													<t t-foreach="data_new" t-as="index_data">
														<td class="text-right">
															<span style="margin-left:5px; margin-right:5px;" t-esc="index_data['total']" t-options="{'widget': 'float', 'precision': 0}"/>
														</td>
														<t t-set="total_taxes" t-value="index_data['total'] - index_data['total_neto']"/>

														<td class="text-right">
															<span style="margin-left:5px; margin-right:5px;" t-esc="total_taxes" t-options="{'widget': 'float', 'precision': 0}"/>
														</td>
														<td class="text-right">
															<span style="margin-left:5px; margin-right:5px;" t-esc="index_data['total_neto']" t-options="{'widget': 'float', 'precision': 0}"/>
														</td>
													</t>
												</t>
												<t t-else="">
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-options="{'widget': 'float', 'precision': 0}">0</span>
													</td>
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-options="{'widget': 'float', 'precision': 0}">0</span>
													</td>
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-options="{'widget': 'float', 'precision': 0}">0</span>
													</td>
												</t>

											</t>
												
										</tr>
										<tr>
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>
											
											<t t-foreach="range(0,size_column_taxes)" t-as="val">
												<t t-set="sum_total" t-value="0"/>
												<t t-set="sum_discount" t-value="0"/>
												<t t-set="sum_neto" t-value="0"/>
												<t t-foreach="columns_categories_out_invoice" t-as="x">
													<t t-set="data_new" t-value="request.env['account.invoice_summary_report'].return_items_columns(data_taxes_out_invoice, columns_taxes_out_invoice[val]['tax_id'], x['category_id'])"/>

													<t t-if="data_new">
														<t t-foreach="data_new" t-as="index_data">
															<t t-set="sum_total" t-value="sum_total + index_data['total']"/>
															<t t-set="sum_discount" t-value="sum_discount + (index_data['total'] - index_data['total_neto'])"/>
															<t t-set="sum_neto" t-value="sum_neto + index_data['total_neto']"/>
														</t>
													</t>

												</t>

												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="sum_total" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>
												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="sum_discount" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>
												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="sum_neto" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>
											</t>
												
										</tr>
									</tbody>
								</table>

							</t>



							<!-- total impuestos devoluciones-->
							<t t-if="columns_taxes_out_refund and columns_categories_out_refund">

								<t t-set="size_column_taxes" t-value="len(columns_taxes_out_refund)"/>

								<br/>
								<h4>Resumen de Ventas (Devoluciones)</h4>

								<table class='receipt-orderlines' style="width: 75%; border: 2px; border: 1px solid #000;" name="invoice_line_table">
									<colgroup>
										<col width='20%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
										<col width='10%' />
									</colgroup>

									<thead class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr>
											<th class="text-right">
												<span style="margin-left:5px; margin-right:5px;">OPERACIONES</span>
											</th>
											<t t-foreach="columns_taxes_out_refund" t-as="x">
												<th class="text-center" colspan="3">
													<span style="margin-left:5px; margin-right:5px;" t-esc="x['tax_name']"/>
												</th>
											</t>
											
										</tr>
										<tr>
											<th class="text-left">
												<span style="margin-left:5px; margin-right:5px;">CATEGORÍA</span>
											</th>
											<t t-foreach="columns_taxes_out_refund" t-as="x">
												<th class="text-center" colspan="1">
													<span style="margin-left:5px; margin-right:5px;">VALOR FACTURADO</span>
												</th>
												<th class="text-center" colspan="1">
													<span style="margin-left:5px; margin-right:5px;">IMPUESTO</span>
												</th>
												<th class="text-center" colspan="1">
													<span style="margin-left:5px; margin-right:5px;">BASE</span>
												</th>
											</t>
											
										</tr>
									</thead>
									<tbody class='receipt-orderlines' style="width: 100%; border: 2px; border: 1px solid #000;">
										<tr t-foreach="columns_categories_out_refund" t-as="x">
											<td class="text-left">
												<span style="margin-left:5px; margin-right:5px;" t-esc="x['category']"/>
											</td>

											<t t-foreach="range(size_column_taxes)" t-as="index">

												<t t-set="data_new" t-value="request.env['account.invoice_summary_report'].return_items_columns(data_taxes_out_refund, columns_taxes_out_refund[index]['tax_id'], x['category_id'])"/>

												<t t-if="data_new">
													<t t-foreach="data_new" t-as="index_data">
														<td class="text-right">
															<span style="margin-left:5px; margin-right:5px;" t-esc="index_data['total']" t-options="{'widget': 'float', 'precision': 0}"/>
														</td>
														<t t-set="total_taxes" t-value="index_data['total'] - index_data['total_neto']"/>
														<td class="text-right">
															<span style="margin-left:5px; margin-right:5px;" t-esc="total_taxes" t-options="{'widget': 'float', 'precision': 0}"/>
														</td>
														<td class="text-right">
															<span style="margin-left:5px; margin-right:5px;" t-esc="index_data['total_neto']" t-options="{'widget': 'float', 'precision': 0}"/>
														</td>
													</t>
												</t>
												<t t-else="">
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-options="{'widget': 'float', 'precision': 0}">0</span>
													</td>
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-options="{'widget': 'float', 'precision': 0}">0</span>
													</td>
													<td class="text-right">
														<span style="margin-left:5px; margin-right:5px;" t-options="{'widget': 'float', 'precision': 0}">0</span>
													</td>
												</t>

											</t>
												
										</tr>

										<tr>
											<td class="text-right">
												<h6><strong><span style="margin-left:5px; margin-right:5px;">Total</span></strong></h6>
											</td>
											
											<t t-foreach="range(0,size_column_taxes)" t-as="val">
												<t t-set="sum_total" t-value="0"/>
												<t t-set="sum_discount" t-value="0"/>
												<t t-set="sum_neto" t-value="0"/>
												<t t-foreach="columns_categories_out_refund" t-as="x">
													<t t-set="data_new" t-value="request.env['account.invoice_summary_report'].return_items_columns(data_taxes_out_refund, columns_taxes_out_refund[val]['tax_id'], x['category_id'])"/>

													<t t-if="data_new">
														<t t-foreach="data_new" t-as="index_data">
															<t t-set="sum_total" t-value="sum_total + index_data['total']"/>
															<t t-set="sum_discount" t-value="sum_discount + (index_data['total'] - index_data['total_neto'])"/>
															<t t-set="sum_neto" t-value="sum_neto + index_data['total_neto']"/>
														</t>
													</t>

												</t>

												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="sum_total" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>
												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="sum_discount" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>
												<td class="text-right">
													<span style="margin-left:5px; margin-right:5px;" t-esc="sum_neto" t-options="{'widget': 'float', 'precision': 0}"/>
												</td>
											</t>
												
										</tr>

									</tbody>
								</table>

							</t>

							<br/>
							<br/>
							<div t-if="print_copy">
								<center><h4>- C O P I A - </h4></center>
							</div>

							<div class="last-page">
								<p style="page-break-after:always;"/>
							</div>

						</t>
					</t>
				</div>

			</t>
		</t>
	</template>


	<report
		id="action_report_invoice_summary"
		model="account.invoice_summary_report"
		string="Resumen de Facturas"
		report_type="qweb-pdf"
		name="summary_report_invoice.report_invoice_summary"
		file="summary_report_invoice.report_invoice_summary"
		menu="False"
	/>


	<record id="action_report_invoice_summary" model="ir.actions.report">
		<field name="paperformat_id" ref="base.paperformat_euro"/>
	</record>

</odoo>